
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>电脑</title>
	<meta name="author" content="Nan Liu">

	
	<meta name="description" content="In Puppet 2.7, one of the new features added was device management. In this initial release, only a small number of Cisco switches were supported. &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="电脑" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>

<body>
	<header id="header" class="inner"><h1><a href="/">电脑</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:nanliu.github.com">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/sesshin" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/nanliu" title="GitHub">GitHub</a>
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
	<form class="search" action="http://google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:nanliu.github.com">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/02/20/device-management-with-puppet/">
		
			Device Management With Puppet</a>
	</h2>
	<div class="entry-content">
		<p>In Puppet 2.7, one of the new features added was device management. In this initial release, only a small number of Cisco switches were supported. Overall the capabilities weren’t really significant, however the concept shifted people’s perception of the boundaries for configuration management. All of sudden Puppet didn’t end at the operating system, and extended to black boxes that were previously thought to be a bridge too far.</p>

<p><img src="/images/inception_dream.gif" title="'dream big'" /></p>

<p>This slowly spawned a flurry of activities exploring network devices, load-balancers, and storage:</p>

<ul>
  <li><a href="http://www.juniper.net/techpubs/en_US/junos-puppet0.8/topics/concept/automation-junos-puppet-overview.html">Juniper</a><sup id="fnref:fn-juniper"><a href="#fn:fn-juniper" rel="footnote">1</a></sup>: <a href="https://github.com/jeremyschulman/puppet-netdev">puppet-netdev</a></li>
  <li><a href="https://devcentral.f5.com/blogs/us/f5-friday-how-to-stop-running-the-project-gauntlet-of-doom-with-devops">F5 Big-IP</a>: <a href="https://github.com/puppetlabs/puppetlabs-f5">puppetlabs-f5</a></li>
  <li><a href="http://forge.puppetlabs.com/fatmcgav/netapp">Net App</a>: <a href="https://github.com/fatmcgav/fatmcgav-netapp">fatmcgav-netapp</a></li>
</ul>

<p>The benefits of having the entire infrastructure automated with a single tool chain under version control is indisputable. A Software Define Data Center is not complete until you gap the management capabilities whether it’s your network or storage. With that said, there’s still some limitations with puppet device. Currently, the device command only supports communication with a single device at a time. This is fine when the device is self contained, but in some instances it’s necessary to interact with a series of devices to perform a meaningful task. For this reason, we developed transport resource to support multiple connectivity for a single puppet execution. This is not a substitution for orchestration of a chain of events, but rather to group resources that have interactions between different devices:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">transport</span> <span class="p">{</span> <span class="s1">&#39;ssh&#39;</span><span class="p">:</span>
</span><span class="line">  <span class="n">username</span> <span class="o">=&gt;</span> <span class="s1">&#39;root&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="n">password</span> <span class="o">=&gt;</span> <span class="s1">&#39;p@ss&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="n">server</span>   <span class="o">=&gt;</span> <span class="s1">&#39;192.168.1.10&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="c1"># support connection options in net::ssh :</span>
</span><span class="line">  <span class="n">options</span>  <span class="o">=&gt;</span> <span class="p">{</span> <span class="s1">&#39;port&#39;</span> <span class="o">=&gt;</span> <span class="mi">10022</span> <span class="p">},</span>
</span><span class="line"><span class="p">}</span>
</span><span class="line">
</span><span class="line"><span class="n">transport</span> <span class="p">{</span> <span class="s1">&#39;rest&#39;</span><span class="p">:</span>
</span><span class="line">  <span class="n">username</span> <span class="o">=&gt;</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="n">password</span> <span class="o">=&gt;</span> <span class="s1">&#39;secret!&#39;</span><span class="p">,</span>
</span><span class="line">  <span class="n">server</span>   <span class="o">=&gt;</span> <span class="s1">&#39;192.168.1.11&#39;</span><span class="p">,</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>A transport is shared and reused across several resources, and custom type/provider can leverage any transport connectivity:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="c1"># this is a mockup</span>
</span><span class="line"><span class="n">remote_service</span> <span class="p">{</span> <span class="s1">&#39;ntp&#39;</span><span class="p">:</span>
</span><span class="line">  <span class="k">ensure</span>    <span class="o">=&gt;</span> <span class="n">running</span><span class="p">,</span>
</span><span class="line">  <span class="n">transport</span> <span class="o">=&gt;</span> <span class="no">Transport</span><span class="o">[</span><span class="s1">&#39;ssh&#39;</span><span class="o">]</span><span class="p">,</span>
</span><span class="line"><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Here’s an example debug output showing ssh connectivity established and reused for 192.168.1.10 to perform a series of activity.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
</pre></td><td class="code"><pre><code class="console"><span class="line"><span class="go">debug: PuppetX::Puppetlabs::Transport::Ssh initializing connection to: 192.168.1.10</span>
</span><span class="line"><span class="go">debug: Executing on 192.168.1.10:</span>
</span><span class="line"><span class="go">vpxd_servicecfg eula read</span>
</span><span class="line"><span class="go">debug: Execution result:</span>
</span><span class="line"><span class="go">VC_EULA_STATUS=1</span>
</span><span class="line"><span class="go">VC_CFG_RESULT=0</span>
</span><span class="line">
</span><span class="line"><span class="go">debug: Executing on 192.168.1.10:</span>
</span><span class="line"><span class="go">vpxd_servicecfg db read</span>
</span><span class="line"><span class="go">debug: Execution result:</span>
</span><span class="line"><span class="go">VC_DB_TYPE=embedded</span>
</span><span class="line"><span class="go">VC_DB_SERVER=</span>
</span><span class="line"><span class="go">VC_DB_SERVER_PORT=</span>
</span><span class="line"><span class="go">VC_DB_INSTANCE=</span>
</span><span class="line"><span class="go">VC_DB_USER=</span>
</span><span class="line"><span class="go">VC_DB_SCHEMA_VERSION=</span>
</span><span class="line"><span class="go">VC_CFG_RESULT=0</span>
</span><span class="line">
</span><span class="line"><span class="go">debug: Executing on 192.168.1.10:</span>
</span><span class="line"><span class="go">vpxd_servicecfg sso read</span>
</span><span class="line"><span class="go">debug: Execution result:</span>
</span><span class="line"><span class="go">SSO_TYPE=embedded</span>
</span><span class="line"><span class="go">SSO_LS_LOCATION=https://192.168.1.10:7444/lookupservice/sdk</span>
</span><span class="line"><span class="go">SSO_DB_TYPE=embedded</span>
</span><span class="line"><span class="go">SSO_DB_SERVER=localhost</span>
</span><span class="line"><span class="go">SSO_DB_SERVER_PORT=5432</span>
</span><span class="line"><span class="go">SSO_DB_INSTANCE=ssodb</span>
</span><span class="line"><span class="go">SSO_DB_USER=ssod</span>
</span><span class="line"><span class="go">SSO_DB_PASSWORD=</span>
</span><span class="line"><span class="go">VC_CFG_RESULT=0</span>
</span><span class="line">
</span><span class="line"><span class="go">debug: Executing on 192.168.1.10:</span>
</span><span class="line"><span class="go">vpxd_servicecfg service status</span>
</span><span class="line"><span class="go">debug: Execution result:</span>
</span><span class="line"><span class="go">VC_SERVICE_STATUS=1</span>
</span><span class="line"><span class="go">VC_CFG_RESULT=0</span>
</span><span class="line">
</span><span class="line"><span class="go">debug: Finishing transaction 2205823080</span>
</span><span class="line"><span class="go">debug: Closing PuppetX::Puppetlabs::Transport::Ssh connection to: 192.168.1.10</span>
</span><span class="line"><span class="go">debug: Storing state</span>
</span><span class="line"><span class="go">debug: Stored state in 0.07 seconds</span>
</span><span class="line"><span class="go">notice: Finished catalog run in 2.90 seconds</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>In the example above, a single ssh connection was established at the beginning, and closed at the end of the session. This was one of the roadblock <a href="https://twitter.com/nwkautomaniac">Jeremy Schulman</a> brought up when developing network devices NETCONF sessions. Originally I suggested a resource responsible for closing the connections that had automatic dependencies to the correct network resources since there was no API to do this in the provider<sup id="fnref:fn-tickets"><a href="#fn:fn-tickets" rel="footnote">2</a></sup>. However this doesn’t take in consideration for resources failures which results in dangling open connections. Ultimately, I went back to Puppet::Transaction and adding the connection cleanup at the end of evaluate method:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">module</span> <span class="nn">Puppet</span>
</span><span class="line">  <span class="k">class</span> <span class="nc">Transaction</span>
</span><span class="line">    <span class="n">alias_method</span> <span class="ss">:evaluate_original</span><span class="p">,</span> <span class="ss">:evaluate</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">evaluate</span>
</span><span class="line">      <span class="n">evaluate_original</span>
</span><span class="line">      <span class="ss">PuppetX</span><span class="p">:</span><span class="ss">:Puppetlabs</span><span class="o">::</span><span class="no">Transport</span><span class="o">.</span><span class="n">cleanup</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This isn’t the cleanest solution, since it monkey patches Puppet’s internal, and does not trap user termination of Puppet, but it is more reliable then depending on every resource succeeding. Thanks again to Jeremy’s original work with transaction.rb which led me down this path. For now this is a work around, while we wait for Puppet Labs come up with a formal solution to <a href="http://projects.puppetlabs.com/issues/3946">#3946</a>.</p>

<p>Next week at <a href="http://communities.vmware.com/community/vmtn/partner-exchange">VMware Partners Exchange</a> (PEX 2013), <a href="http://nickapedia.com/2013/02/01/stuff-to-see-puppet-pex-and-more/">Nick Weaver</a> and Carl Caum will present more about Puppet and how it works with VMware Products at session VPN1298. This is just a sneak preview, so please attend to get the complete picture. Stay tuned, and I will provide more technical details about what we are using Puppet for next week after the PEX announcement.</p>

<div class="footnotes">
  <ol>
    <li id="fn:fn-juniper">
      <p>Juniper has gone as far as embedding Puppet agent to the device.<a href="#fnref:fn-juniper" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:fn-tickets">
      <p>See <a href="http://projects.puppetlabs.com/issues/3946">#3946</a>. Work on Puppet long enough, you’ll find tickets indicating Dan has explored these dark corners before anyone else.<a href="#fnref:fn-tickets" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-02-20T17:14:00-08:00" pubdate data-updated="true">Feb 20<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/device/'>device</a>, <a class='category' href='/blog/categories/puppet/'>puppet</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/02/08/migrating-to-puppet-3-dot-x/">
		
			Migrating to Puppet 3.x</a>
	</h2>
	<div class="entry-content">
		<p>I am a bit late to the Puppet 3.0 party, since 3.1 have been released recently<sup id="fnref:fn-semver"><a href="#fn:fn-semver" rel="footnote">1</a></sup>. After reading the <a href="http://docs.puppetlabs.com/puppet/3/reference/release_notes.html">release notes</a> and <a href="http://somethingsinistral.net/blog/the-angry-guide-to-puppet-3/">“The Angry Guide to Puppet 3”</a>, I thought most of the upgrade issues have been covered, but there was still a small surprise when it comes to types and providers.</p>

<p>The <a href="http://docs.puppetlabs.com/puppet/3/reference/release_notes.html#exec">Exec resource</a> had a small behavior change noted as: “Due to misleading values, the HOME and USER environment variables are now unset when running commands.”</p>

<p>The impact is a bit more significant than updating Exec resource since it also affects commands declared in providers. If the invoked command depends on the HOME environment variables such as brew, it will fail in Puppet 3:</p>

<pre><code>Error: /Stage[main]//Package[rbenv]:
Could not evaluate: Could not list packages:
Execution of '/usr/local/bin/brew list --versions rbenv' returned 1:
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/pathname.rb:853:in `expand_path':
couldn't find HOME environment -- expanding `~/Library/Caches/Homebrew' (ArgumentError)
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/pathname.rb:853:in `expand_path'
from /usr/local/Library/Homebrew/global.rb:22:in `cache'
from /usr/local/Library/Homebrew/global.rb:41
from /usr/local/bin/brew:17:in `require'
from /usr/local/bin/brew:17
</code></pre>

<p>The solution is described in <a href="http://projects.puppetlabs.com/issues/16779">#16779</a>:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Setting command environment variables</span><a href="http://projects.puppetlabs.com/issues/16779">16779 </a></figcaption> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">has_command</span><span class="p">(</span><span class="ss">:brew</span><span class="p">,</span> <span class="s1">&#39;brew&#39;</span><span class="p">)</span> <span class="k">do</span>
</span><span class="line">  <span class="n">environment</span><span class="p">({</span> <span class="s1">&#39;HOME&#39;</span> <span class="o">=&gt;</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;HOME&#39;</span><span class="o">]</span> <span class="p">})</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The method ‘has_command’ is not backwards compatible with Puppet 2.x, so we need to wrap it around some version check:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">if</span> <span class="ss">Puppet</span><span class="p">:</span><span class="ss">:Util</span><span class="o">::</span><span class="no">Package</span><span class="o">.</span><span class="n">versioncmp</span><span class="p">(</span><span class="no">Puppet</span><span class="o">.</span><span class="n">version</span><span class="p">,</span> <span class="s1">&#39;3.0&#39;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span>
</span><span class="line">  <span class="n">has_command</span><span class="p">(</span><span class="ss">:brew</span><span class="p">,</span> <span class="s2">&quot;/usr/local/bin/brew&quot;</span><span class="p">)</span> <span class="k">do</span>
</span><span class="line">    <span class="n">environment</span><span class="p">({</span> <span class="s1">&#39;HOME&#39;</span> <span class="o">=&gt;</span> <span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;HOME&#39;</span><span class="o">]</span> <span class="p">})</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">else</span>
</span><span class="line">  <span class="n">commands</span> <span class="ss">:brew</span> <span class="o">=&gt;</span> <span class="s2">&quot;/usr/local/bin/brew&quot;</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="n">brew</span><span class="p">(</span><span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="s1">&#39;--versions&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>This also means execute will strip these two environment variables as well, so commands pass :custom_environment to preserve this value. execute is less common, and don’t use it unless you need special behavior such as :failonfail =&gt; false:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">execute</span><span class="p">(</span><span class="o">[</span><span class="n">command</span><span class="p">(</span><span class="ss">:brew</span><span class="p">),</span> <span class="s1">&#39;list&#39;</span><span class="p">,</span> <span class="s1">&#39;--version&#39;</span><span class="o">]</span><span class="p">,</span> <span class="ss">:custom_environment</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="s1">&#39;HOME&#39;</span><span class="o">=&gt;</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;HOME&#39;</span><span class="o">]</span><span class="p">})</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Hope this is helpful for anyone else who stumbles into this issue.</p>

<div class="footnotes">
  <ol>
    <li id="fn:fn-semver">
      <p>The proliferation of versions might be alarming, but it’s due to stricter adherence to semantic versioning. The changes 3.0 3.1 is closer to 2.7.0 to 2.7.1 than 2.6 to 2.7.<a href="#fnref:fn-semver" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-02-08T01:52:00-08:00" pubdate data-updated="true">Feb 8<span>th</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/providers/'>providers</a>, <a class='category' href='/blog/categories/puppet/'>puppet</a>, <a class='category' href='/blog/categories/types/'>types</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/01/02/new-year-reboot/">
		
			New Year: Reboot</a>
	</h2>
	<div class="entry-content">
		<p>For the last two and half year, I lived, breathed, and spent my waking hours thinking about Puppet. In a blink of an eye Puppet Labs is no longer the 12 person startup above Old Town Pizza shop<sup id="fnref:fn-pizza"><a href="#fn:fn-pizza" rel="footnote">1</a></sup> or more infamously, above the start of the Shanghai Tunnel <sup id="fnref:fn-shanghai"><a href="#fn:fn-shanghai" rel="footnote">2</a></sup> in China Town. </p>

<p><img src="/images/reductive.jpg" title="'Seriously, this was it.'" /></p>

<p>The company can probably can start shedding the term startup, since it’s 10x the size, closed a third round investment, and finished their third office move to the Pearl district.</p>

<p>Looking back, I still pinch myself for even getting the opportunity to be in Portland since I started the job knowing little about the software. I’m still amused by the interview with the other candidate in the same room that felt like a reality TV show<sup id="fnref:fn-interview"><a href="#fn:fn-interview" rel="footnote">3</a></sup>. Fast forward 200,000 miles around the world later and I’m finally feeling comfortable using and talking about Puppet. It’s been an incredible ride, and more important I’ve been lucky to work with some of the brightest people I know. If you enjoy solving infrastructure problems, <a href="http://www.jobscore.com/jobs/puppetlabs">apply and have a blast</a>.</p>

<p>It’s a New Year, and I’m sad it’s time for a reboot and I’ve left Puppet Labs to join VMware as a Sr. Systems Engineer under R&amp;D. As usual a new shiny problem has presented itself and I’m diving head first into the unknown.</p>

<p>However I’m not saying goodbye to the Puppet community. A glimps of what’s to come should be announced at <a href="http://communities.vmware.com/community/vmtn/partner-exchange">VMware Partners Exchange 2013</a>. Here’s to 2013.</p>

<div class="footnotes">
  <ol>
    <li id="fn:fn-pizza">
      <p><a href="http://www.oldtownpizza.com/">www.oldtownpizza.com</a> + Stumptown Coffee = Startup Fuel.<a href="#fnref:fn-pizza" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:fn-shanghai">
      <p>I thought it was a joke at first too: <a href="http://www.shanghaitunnels.info/">http://www.shanghaitunnels.info</a><a href="#fnref:fn-shanghai" rel="reference">&#8617;</a></p>
    </li>
    <li id="fn:fn-interview">
      <p>Story for another time, best told by Dan. Thankfully they didn’t maintain this medieval practice of jousting between candidates.<a href="#fnref:fn-interview" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-01-02T20:59:00-08:00" pubdate data-updated="true">Jan 2<span>nd</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/musings/'>musings</a>


</div>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/01/01/from-typhoon-to-computers/">
		
			From Typhoon to Computers</a>
	</h2>
	<div class="entry-content">
		<p>Translations tend to have this weird effect of imbuing additional meanings the original language didn’t intend to contain. One of the possible origins for the word Typhoon is the Chinese pronunciation of “East Wind”(东风) <sup id="fnref:fn-jstor"><a href="#fn:fn-jstor" rel="footnote">1</a></sup>. Interestingly enough, the word has been imported back to Chinese phonetically as “Typhoon”(台风) with a completely different meaning than the original word east wind.</p>

<p>There’s two translations of the word computers in Chinese: “计算机” and “电脑”. If we go through the typhoon exercise and translate them back to English. The first, “Computing Machine”, is not far off from the original meaning, but the second, “Electronic Brain”, seems far more imaginative; especially compared to what computer systems were able to achieve when these words were first translated.</p>

<p>When I started working on computers, machines were simply waiting for the next human instruction, the tools for managing them doesn’t really mask the rather tedious task. </p>

<p><img src="http://imgs.xkcd.com/comics/tar.png" title="'tar -xvf'" /></p>

<p>However with latest generation of configuration management software, I finally feel like we started building solutions to tackle the automation problem in a fundamental way. Similar to the insight in Stephen Wolfram’s book “A New Kind of Science”, complexity can be derive from simple rules, the inverse also appears be true: “complex systems can be managed with simple tools following basic rules chained together”.</p>

<p><img src="/images/wolfram.png" title="'Wolfram substitution systems models growth of plants'" /></p>

<p>We are certainly nowhere near having all the right building blocks for deploying and managing self healing infrastructure, but it’s a great aspiration to build better automation and be one small step closer towards the “Electronic Brain”. </p>

<div class="footnotes">
  <ol>
    <li id="fn:fn-jstor">
      <p><a href="www.jstor.org/stable/1798728">www.jstor.org/stable/1798728</a><a href="#fnref:fn-jstor" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2013-01-01T10:21:00-08:00" pubdate data-updated="true">Jan 1<span>st</span>, 2013</time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/musings/'>musings</a>


</div>
	
</div></article>

<nav id="pagenavi">
    
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2013

    Nan Liu

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->




	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-38537427-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>